#: import threading threading
WindowManager:
    MainScreen:
        id: main
    InventarioScreen:
        id: inventario
    ShapefileScreen:
        id: shapefilescreen
    BBoxScreen:
        id:bboxscreen
    DownloadScreenShp:
        id: downloadscreen_shp



<MainScreen>:
    name: 'main'
    FloatLayout:
        MapView:
            id: map
            lat: -10
            lon: -50
            zoom: 5
            size_hint: 1, 1
        BoxLayout:
            Button:
                text: 'Selecionar Inventario'
                size_hint: 0.2, 0.05
                pos_hint: {'x':0, 'y':0}
                # on_release: root.open_popup()
                on_release:
                    root.change_toInventario()
                    root.manager.transition.direction = 'right'

            Button:
                text: 'Selecionar Shapefile'
                size_hint: 0.2, 0.05
                pos_hint: {'x':0.2, 'y':0}
                # on_release: root.open_popup_shp()
                on_release:
                    root.change_toShape()
                    root.manager.transition.direction = 'up'

            Button:
                text: 'Selecionar area'
                size_hint: 0.2, 0.05
                pos_hint: {'x':0.2, 'y':0}
                # on_release: root.open_popup_shp()
                on_release:
                    root.get_bbox()
                    root.change_toBbox()
                    root.manager.transition.direction = 'down'
            Button:
                text: 'Download'
                size_hint: 0.2, 0.05
                pos_hint: {'x':0.4, 'y':0}
                # on_release: root.download_ANA_station()
                on_release:
                    root.change_toDownload_shp()
                    root.manager.transition.direction = 'left'
                # root.show_codes()


<InventarioScreen>:
    name: 'inventario'
    GridLayout:
        rows: 4
        FileChooserListView:
            id: filechooserscreen
            filters: ['*.csv']
            on_submit:
                inventarioPath.text = filechooserscreen.selection[0]
        Label:
            id: inventarioPath
            text: 'Nada selecionado'
        Button:
            text: 'Selecionar'
            on_release:
                # root.teste()
                root.show_inventarioCluster(filechooserscreen.selection)
        Button:
            text: 'Voltar'
            on_release:
                app.root.current='main'
                root.manager.transition.direction = "left"

<ShapefileScreen>:
    name: 'shapefilescreen'
    GridLayout:
        rows: 4
        FileChooserListView:
            id: filechoosershape
            filters: ['*.shp']
            on_submit: shapePath.text = filechoosershape.selection[0]
        Label:
            id: shapePath
            text: 'Nada selecionado'
        Button:
            text: 'Selecionar'
            on_release:
                root.get_codes(filechoosershape.selection)

        Button:
            text: 'Voltar'
            on_release:
                app.root.current = 'main'
                root.manager.transition.direction = 'down'

<BBoxScreen>:
    name: 'bboxscreen'
    # FloatLayout:
    GridLayout:
        rows: 3
        Label:
            id: labelbbox
            text: 'Nada Selecionado'
        Button:
            text: 'Confirmar'
            on_release:
                root.get_codes()
        Button:
            text: 'Voltar'
            # size_hint: 0.2, 0.05
            on_release:
                app.root.current = 'main'
                root.manager.transition.direction = 'up'


<DownloadScreenShp>:
    name: 'downloadscreen_shp'
    GridLayout:
        rows: 4
        FileChooserListView:
            id: filechooser_downloadshp
            dirselect: True
            filters: [root.selected]
        Label:
            id: downloadShpPath
            text: 'Nada selecionado'
        Button:
            id: downloadbtn
            on_release:
                root.download_ANA_station()
                # root.teste()
        Button:
            text: 'Voltar'
            on_release:
                app.root.current = 'main'
                root.manager.transition.direction = 'right'
